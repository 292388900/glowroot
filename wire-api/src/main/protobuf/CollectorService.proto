syntax = "proto3";

import "Trace.proto";
import "Aggregate.proto";
import "GaugeValue.proto";

package org_glowroot_wire_api_model;

option java_package = "org.glowroot.wire.api.model";

service CollectorService {
  rpc collectAggregates(AggregateMessage) returns (EmptyMessage);
  rpc collectGaugeValues(GaugeValueMessage) returns (EmptyMessage);
  rpc collectTrace(TraceMessage) returns (EmptyMessage);
}

message AggregateMessage {
  string server = 1;
  int64 capture_time = 2;
  repeated OverallAggregate overall_aggregate = 3;
  repeated TransactionAggregate transaction_aggregate = 4;
}

message GaugeValueMessage {
  string server = 1;
  repeated GaugeValue gauge_values = 2;
}

message TraceMessage {
  string server = 1;
  Trace trace = 2;
}

message EmptyMessage {}
