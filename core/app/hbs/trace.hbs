{{#if error}}
  <div>
    <strong style="font-size: 16px;">ERROR</strong>
  </div>
{{/if}}
{{#if active}}
  <div>
    <strong style="font-size: 16px;">ACTIVE {{#if partial}}/ PARTIAL{{/if}}</strong>
  </div>
{{^}}
  {{#if partial}}
    <div>
      <strong style="font-size: 16px;">PARTIAL</strong>
    </div>
  {{/if}}
{{/if}}
{{#if background}}
  <div>
    <strong style="font-size: 16px;">Background</strong>
  </div>
{{/if}}
<div class="gt-break-word gt-second-line-indent">
  <strong style="font-size: 16px;">{{headline}}</strong>
  {{#if showExport}}
    <button class="gt-flat-btn gt-flat-btn-big gt-link-color download-trace">
      export
    </button>
  {{/if}}
</div>
<div class="gt-break-word gt-second-line-indent">
  <span class="gt-bold">Transaction type:</span>
  {{transactionType}}
</div>
<div class="gt-break-word gt-second-line-indent">
  <span class="gt-bold">Transaction name:</span>
  {{transactionName}}
</div>
{{#if error}}
  <div class="gt-break-word gt-second-line-indent">
    <span class="gt-bold">Error:</span>
    {{errorMessage}}
  </div>
  {{#if errorThrowable}}
    <div class="gt-trace-exception-indent">
      <span class="gt-inline-block gt-unexpanded-content gt-link-color">exception</span>
      {{! using span so background will stretch beyond page border if needed }}
      <span class="gt-inline-block gt-expanded-content gt-nowrap hide">
        {{{exceptionHtml errorThrowable}}}
      </span>
    </div>
  {{/if}}
{{/if}}
<div>
  <span class="gt-bold">Start:</span>
  {{date startTime}}
</div>
<div>
  <span class="gt-bold">Duration:</span>
  {{nanosToMillis duration}}{{#if active}}..{{/if}} milliseconds
</div>
{{#if user}}
  <div class="gt-break-word gt-second-line-indent">
    <span class="gt-bold">User:</span>
    {{user}}
  </div>
{{/if}}
{{#eachKeyValuePair customAttributes}}
  <div class="gt-break-word gt-second-line-indent">
    <span class="gt-bold">{{key}}:</span>
    {{value}}
  </div>
{{/eachKeyValuePair}}
{{{customDetailHtml customDetail}}}
<div class="gt-bold">
  Breakdown:
</div>
<div class="gt-timers" style="margin-top: -10px;">
  <table class="gt-timers-table gt-indent2" style="border-spacing: 0;">
    <thead>
    <tr>
      <td></td>
      <td style="font-weight: 600;">total (ms)</td>
      <td style="font-weight: 600;">count</td>
      <td>
        <button class="gt-flat-btn gt-flat-btn-big gt-link-color gt-timers-view-toggle"
                style="margin-top: -6px; margin-bottom: -6px;">
          switch to tree view
        </button>
      </td>
    </tr>
    </thead>
    <tbody>
    {{#eachTimerFlattenedOrdered timers}}
      <tr class="align-top">
        <td style="text-align: left;">
          <div style="margin-left: {{timerIndent .}}em;">
            <div class="gt-break-word gt-second-line-indent">{{name}}</div>
          </div>
        </td>
        <td>{{nanosToMillis total}}{{#if active}}..{{/if}}</td>
        <td>{{count}}</td>
        <td></td>
      </tr>
    {{/eachTimerFlattenedOrdered}}
    </tbody>
  </table>
  <table class="hide gt-timers-table gt-indent2" style="border-spacing: 0;">
    <thead>
    <tr>
      <td></td>
      <td style="font-weight: 600;">total (ms)</td>
      <td style="font-weight: 600;">count</td>
      <td>
        <button class="gt-flat-btn gt-flat-btn-big gt-link-color gt-timers-view-toggle"
                style="margin-top: -6px; margin-bottom: -6px;">
          switch to flattened view
        </button>
      </td>
    </tr>
    </thead>
    <tbody>
    {{#eachTimerOrdered timers}}
      <tr class="align-top">
        <td style="text-align: left;">
          <div style="margin-left: {{timerIndent .}}em;">
            <div class="gt-break-word gt-second-line-indent">{{name}}</div>
          </div>
        </td>
        <td>{{nanosToMillis total}}{{#if active}}..{{/if}}</td>
        <td>{{count}}</td>
        <td></td>
      </tr>
    {{/eachTimerOrdered}}
    </tbody>
  </table>
</div>
{{#ifAnyThreadInfo .}}
  <div class="gt-bold">
    JVM thread metrics
  </div>
  {{#ifExists threadCpuTime}}
    <div class="gt-indent2">
      <span>CPU time:</span>
      {{nanosToMillis threadCpuTime}} milliseconds
    </div>
  {{/ifExists}}
  {{#ifExists threadBlockedTime}}
    <div class="gt-indent2">
      <span>Blocked time:</span>
      {{nanosToMillis threadBlockedTime}} milliseconds
    </div>
  {{/ifExists}}
  {{#ifExists threadWaitedTime}}
    <div class="gt-indent2">
      <span>Waited time:</span>
      {{nanosToMillis threadWaitedTime}} milliseconds
    </div>
  {{/ifExists}}
  {{#ifExists threadAllocatedBytes}}
    <div class="gt-indent2">
      <span>Allocated memory:</span>
      {{formatAllocatedBytes threadAllocatedBytes}}
    </div>
  {{/ifExists}}
{{/ifAnyThreadInfo}}
{{#if gcInfos}}
  <div class="gt-bold">
    GC info
  </div>
  {{#eachGcInfoOrdered gcInfos}}
    <div class="gt-indent2">
      <span>{{name}}:</span>
      {{collectionTime}} milliseconds ({{collectionCount}} collection{{#ifNotOne collectionCount}}s{{/ifNotOne}})
    </div>
  {{/eachGcInfoOrdered}}
{{/if}}
<br>
{{#ifExistenceYes entriesExistence}}
  <div>
    <button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-sps-toggle">
      <span class="gt-link-color">Trace entries ({{entryCount}})</span>
    </button>
    {{! spinner is not used in export file }}
    <div>
      <div class="hide gt-trace-detail-spinner"></div>
    </div>
  </div>
  <div style="margin: 10px 0;">
    <div id="sps"></div>
  </div>
  {{#ifExistenceYes profileExistence}}
    <div>
      <button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-profile-toggle">
        <span class="gt-link-color">Profile ({{profileSampleCount}})</span>
      </button>
      {{! spinner is not used in export file }}
      <div>
        <div class="hide gt-trace-detail-spinner"></div>
      </div>
    </div>
    <div class="gt-nowrap hide" id="profileOuter" style="margin: 10px 0;">
      <div style="padding-bottom: 10px;">
        <input class="form-control gt-profile-text-filter hide"
               style="display: inline-block; width: 25em;"
               placeholder="filter the profile tree">
        <select class="form-control gt-profile-filter gt-input-xlarge hide" onchange="this.blur()"
                style="display: inline-block; vertical-align: middle;">
        </select>
        <button type="button" class="btn btn-default hide" style="margin-left: 20px;">
          Switch to text filter
        </button>
      </div>

      <div class="gt-profile gt-indent1"></div>
    </div>
  {{/ifExistenceYes}}
{{/ifExistenceYes}}
{{#ifExistenceExpired entriesExistence}}
  {{#ifExistenceExpired profileExistence}}
    <div style="margin: 10px 0;">
      <strong>
        Entries and profile for this trace have expired
      </strong>
      <em>(see Configuration &gt; Storage &gt; Profiles/trace entries capped db)</em>
    </div>
  {{/ifExistenceExpired}}
  {{#ifExistenceNo profileExistence}}
    <div style="margin: 10px 0;">
      <strong>
        Entries for this trace have expired
      </strong>
      <em>(see Configuration &gt; Storage &gt; Profiles/trace entries capped db)</em>
    </div>
  {{/ifExistenceNo}}
{{/ifExistenceExpired}}
