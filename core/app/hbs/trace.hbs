{{#if error}}
  <div>
    <strong style="font-size: 16px;">ERROR</strong>
  </div>
{{/if}}
{{#if active}}
  <div>
    <strong style="font-size: 16px;">ACTIVE {{#if partial}}/ PARTIAL{{/if}}</strong>
  </div>
{{^}}
  {{#if partial}}
    <div>
      <strong style="font-size: 16px;">PARTIAL</strong>
    </div>
  {{/if}}
{{/if}}
{{#if background}}
  <div>
    <strong style="font-size: 16px;">Background</strong>
  </div>
{{/if}}
<div class="gt-second-line-indent">
  <strong style="font-size: 16px;">{{headline}}</strong>
  {{#if showExport}}
    <button class="gt-flat-btn gt-flat-btn-big gt-link-color download-trace">
      export
    </button>
  {{/if}}
</div>
<div class="gt-second-line-indent">
  <span class="gt-bold">Transaction type:</span>
  {{transactionType}}
</div>
<div class="gt-second-line-indent">
  <span class="gt-bold">Transaction name:</span>
  {{transactionName}}
</div>
<div>
  <span class="gt-bold">Start:</span>
  {{date startTime}}
</div>
<div>
  <span class="gt-bold">Duration:</span>
  {{nanosToMillis duration}}{{#if active}}..{{/if}} milliseconds
</div>
{{#if error}}
  <div class="gt-second-line-indent">
    <span class="gt-bold">Error:</span>
    {{error}}
  </div>
{{/if}}
{{#if user}}
  <div class="gt-second-line-indent">
    <span class="gt-bold">User:</span>
    {{user}}
  </div>
{{/if}}
{{#eachKeyValuePair customAttributes}}
  <div class="gt-second-line-indent">
    <span class="gt-bold">{{key}}:</span>
    {{value}}
  </div>
{{/eachKeyValuePair}}
<div class="gt-bold">
  Breakdown <span style="font-weight: normal;">(in milliseconds)</span>:
</div>
<div class="gt-trace-metrics">
  <table class="gt-trace-metrics-table gt-indent2" style="border-spacing: 0;">
    <thead>
    <tr>
      <td></td>
      <td>total</td>
      <td>min</td>
      <td>max</td>
      <td>count</td>
      <td>
        <button class="gt-flat-btn gt-flat-btn-big gt-link-color gt-metric-view-toggle"
                style="margin-top: -6px; margin-bottom: -6px;">
          switch to tree view
        </button>
      </td>
    </tr>
    </thead>
    <tbody>
    {{#eachMetricFlattenedOrdered metrics}}
      <tr class="align-top">
        <td style="text-align: left;">
          <div style="margin-left: {{metricIndent .}}em;">
            <div class="gt-second-line-indent">{{name}}</div>
          </div>
        </td>
        <td>{{nanosToMillis total}}{{#if active}}..{{/if}}</td>
        <td>{{nanosToMillis min}}{{#if minActive}}..{{/if}}</td>
        <td>{{nanosToMillis max}}{{#if maxActive}}..{{/if}}</td>
        <td>{{count}}</td>
        <td></td>
      </tr>
    {{/eachMetricFlattenedOrdered}}
    </tbody>
  </table>
  <table class="hide gt-trace-metrics-table gt-indent2" style="border-spacing: 0;">
    <thead>
    <tr>
      <td></td>
      <td>total</td>
      <td>min</td>
      <td>max</td>
      <td>count</td>
      <td>
        <button class="gt-flat-btn gt-flat-btn-big gt-link-color gt-metric-view-toggle"
                style="margin-top: -6px; margin-bottom: -6px;">
          switch to flattened view
        </button>
      </td>
    </tr>
    </thead>
    <tbody>
    {{#eachMetricOrdered metrics}}
      <tr class="align-top">
        <td style="text-align: left;">
          <div style="margin-left: {{metricIndent .}}em;">
            <div class="gt-second-line-indent">{{name}}</div>
          </div>
        </td>
        <td>{{nanosToMillis total}}{{#if active}}..{{/if}}</td>
        <td>{{nanosToMillis min}}{{#if minActive}}..{{/if}}</td>
        <td>{{nanosToMillis max}}{{#if maxActive}}..{{/if}}</td>
        <td>{{count}}</td>
        <td></td>
      </tr>
    {{/eachMetricOrdered}}
    </tbody>
  </table>
</div>
{{#if threadInfo}}
  <div class="gt-bold">
    Thread info
  </div>
  {{#ifExists threadInfo.threadCpuTime}}
    <div class="gt-indent2">
      <span>CPU time:</span>
      {{nanosToMillis threadInfo.threadCpuTime}} milliseconds
    </div>
  {{/ifExists}}
  {{#ifExists threadInfo.threadBlockedTime}}
    <div class="gt-indent2">
      <span>Blocked time:</span>
      {{threadInfo.threadBlockedTime}} milliseconds
    </div>
  {{/ifExists}}
  {{#ifExists threadInfo.threadWaitedTime}}
    <div class="gt-indent2">
      <span>Waited time:</span>
      {{threadInfo.threadWaitedTime}} milliseconds
    </div>
  {{/ifExists}}
  {{#ifExists threadInfo.threadAllocatedBytes}}
    <div class="gt-indent2">
      <span>Allocated memory:</span>
      {{formatAllocatedBytes threadInfo.threadAllocatedBytes}}
    </div>
  {{/ifExists}}
{{/if}}
{{#if gcInfos}}
  <div class="gt-bold">
    GC info
  </div>
  {{#eachGcInfoOrdered gcInfos}}
    <div class="gt-indent2">
      <span>{{name}}:</span>
      {{collectionTime}} milliseconds ({{collectionCount}} collection{{#ifNotOne collectionCount}}s{{/ifNotOne}})
    </div>
  {{/eachGcInfoOrdered}}
{{/if}}
<br>
{{#ifExistenceYes entriesExistence}}
  <div>
    <button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-sps-toggle">
      <span class="gt-link-color">Trace entries</span>
    </button>
    {{! spinner is not used in export file }}
    <div>
      <div class="hide gt-trace-detail-spinner"></div>
    </div>
  </div>
  <div style="margin: 10px 0;">
    <div id="sps"></div>
  </div>
{{/ifExistenceYes}}
{{#ifExistenceExpired entriesExistence}}
  <div>
    <strong>
      Entries no longer exists for this trace
    </strong>
    <em>(see Glowroot > Configuration &gt; Storage &gt; Spans/profiles capped db)</em>
  </div>
{{/ifExistenceExpired}}
{{#ifExistenceYes profileExistence}}
  <div>
    <button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-profile-toggle">
      <span class="gt-link-color">Profile</span>
    </button>
    {{! spinner is not used in export file }}
    <div>
      <div class="hide gt-trace-detail-spinner"></div>
    </div>
  </div>
  <div class="gt-nowrap hide" id="profileOuter" style="margin: 10px 0;">
    <select class="form-control gt-profile-filter gt-input-xlarge hide" onchange="this.blur()"
            style="margin: 4px 0 10px;">
    </select>
    <div class="gt-profile gt-indent1"></div>
  </div>
{{/ifExistenceYes}}
{{#ifExistenceExpired profileExistence}}
  <div>
    <strong>
      Profile no longer exists for this trace
    </strong>
    <em>(see Glowroot > Configuration &gt; Storage &gt; Trace entries/profiles capped db)</em>
  </div>
{{/ifExistenceExpired}}
