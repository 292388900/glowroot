<!--
  Copyright 2013 the original author or authors.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- ng-if is needed to prevent panel from displaying very briefly with red validation errors on load
     due to required input fields being initially empty (note: ng-show is not good enough, at least on IE) -->
<div class="panel panel-default" ng-if="config">
  <div class="panel-heading">
    <h2>User-specific overrides</h2>
  </div>
  <div class="panel-body">
    <form class="form-horizontal" name="formCtrl">
      <div ix-form-group
           ix-label="Enabled"
           ix-model="config.enabled"
           ix-type="checkbox"
           class="ix-form-group-without-help-block">
      </div>
      <div ix-form-group
           ix-label="User ID"
           ix-model="config.userId"
           ix-width="20em">
        <div class="help-block">
          All traces for the given user will use the store threshold and profiling
          configuration below.
        </div>
      </div>
      <div ix-form-group
           ix-label="Store threshold"
           ix-model="config.storeThresholdMillis"
           ix-number="true"
           ix-pattern="pattern.integer"
           ix-required="true"
           ix-width="7em"
           ix-addon="milliseconds">
        <div class="help-block">
          All traces for the given user that exceeds this amount of time will be
          viewable immediately as an active trace and will be stored to disk at its
          completion.
        </div>
      </div>
      <div ix-form-group
           ix-label="Fine profiling"
           ix-model="config.fineProfiling"
           ix-type="checkbox">
        <div class="help-block">
          All traces for the given user will be profiled using the fine-grained
          profiler.
        </div>
      </div>
      <div class="form-group form-buttons">
        <div class="col-lg-offset-3 col-lg-9">
          <div ix-button
               ix-label="Save changes"
               ix-click="save(deferred)"
               ix-disabled="!hasChanges() || formCtrl.$invalid">
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
