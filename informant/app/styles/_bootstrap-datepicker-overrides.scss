/*
 * Copyright 2012-2013 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import "../bower_components/sass-bootstrap/lib/mixins";
@import "variables";

// copied from sass-bootstrap 2.3.2 (used by buttonBackground mixin above)
@mixin gradientBar($primaryColor, $secondaryColor, $textColor: #fff, $textShadow: 0 -1px 0 rgba(0,0,0,.25)) {
  color: $textColor;
  text-shadow: $textShadow;
  @include gradient-vertical($primaryColor, $secondaryColor);
  border-color: $secondaryColor $secondaryColor darken($secondaryColor, 15%);
  border-color: rgba(0,0,0,.1) rgba(0,0,0,.1) fade-in(rgba(0,0,0,.1), 0.15);
}

// copied from sass-bootstrap 2.3.2 until bootstrap-datepicker is based on bootstrap 3
@mixin buttonBackground($startColor, $endColor, $textColor: #fff, $textShadow: 0 -1px 0 rgba(0,0,0,.25)) {
  // gradientBar will set the background to a pleasing blend of these, to support IE<=9
  @include gradientBar($startColor, $endColor, $textColor, $textShadow);
  *background-color: $endColor; /* Darken IE7 buttons by default so they stand out more given they won't have borders */
  @include reset-filter();

  // in these cases the gradient won't cover the background, so we override
  &:hover, &:focus, &:active, &.active, &.disabled, &[disabled] {
    color: $textColor;
    background-color: $endColor;
    *background-color: darken($endColor, 5%);
  }

  // IE 7 + 8 can't handle box-shadow to show active, so we darken a bit ourselves
  &:active,
  &.active {
    background-color: darken($endColor, 10%) \9;
  }
}

body {
  .datepicker {
    table tr td {
      &.today {
        background-image: none;
        background-color: #fff;
        text-shadow: none;
        border: 1px solid #ccc;
        color: #333;
      }
      &.today.new {
        color: #999;
      }
      &.today:hover {
        @include buttonBackground(#ddd, #ddd);
        text-shadow: none;
        border: 1px solid #ccc;
      }
      &.active,
      &.active:hover {
        @include buttonBackground($informant-blue, $informant-blue);
        // !important is required to override .today color when one td is both .today and .active
        // (but only because imported datepicker.less uses !important for .today color)
        color: #fff !important;
        text-shadow: none;
        border: none;
      }
      span {
        &.active,
        &.active:hover {
          @include buttonBackground($informant-blue, $informant-blue);
          color: #000;
          text-shadow: none;
        }
      }
    }
  }
}

// change bootstrap-datepicker less variable @grayLighter from #eee to #ddd
.datepicker table tr td.day:hover {
  background: #ddd;
}

.datepicker table tr td.range,
.datepicker table tr td.range:hover,
.datepicker table tr td.range.disabled,
.datepicker table tr td.range.disabled:hover {
  background: #ddd;
}

.datepicker table tr td span:hover {
  background: #ddd;
}

.datepicker thead tr:first-child th:hover,
.datepicker tfoot tr th:hover {
  background: #ddd;
}
